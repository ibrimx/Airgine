---
import type { CardConfig } from "../../../lib/types/layout";

import TextCard from "./TextCard.astro";
import MediaCard from "./MediaCard.astro";
import StickerCard from "./StickerCard.astro";
import HeroCard from "./HeroCard.astro";
import PostListCard from "./PostListCard.astro";
import OverlayCard from "./OverlayCard.astro";

interface Props {
  config: CardConfig;
}

const { config } = Astro.props;

// ✅ Fix 1: config.size بدل config.gridSize
const gridSize = config.size ?? "1x1";
const rotation = config.styles?.rotation ?? 0;
const background = config.styles?.background;
const textColor = config.styles?.textColor;
---

<div
  class={`card size-${gridSize}`}
  style={`
    ${background ? `background:${background};` : ""}
    ${textColor ? `color:${textColor};` : ""}
    ${rotation !== 0 ? `transform: rotate(${rotation}deg);` : ""}
  `}
>
  {config.variant === "text"      && <TextCard config={config} />}
  {config.variant === "media"     && <MediaCard config={config} />}
  {config.variant === "sticker"   && <StickerCard config={config} />}
  {config.variant === "hero"      && <HeroCard config={config} />}
  {config.variant === "post-list" && <PostListCard config={config} />}
  {/* ✅ Fix 2: إضافة overlay */}
  {config.variant === "overlay"   && <OverlayCard config={config} />}
</div>

<!-- ✅ Fix 3: حذف glass المكرر — يستخدم cards.css بدلاً منه -->
